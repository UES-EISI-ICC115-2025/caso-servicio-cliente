version: "3.1"

# 1. User Intents: What the user can say
intents:
  - greet
  - goodbye
  - affirm # e.g., "yes", "that one"
  - deny # e.g., "no", "not now"
  - thanks
  - out_of_scope # For additional requests outside the main task
  - request_internet_service
  - choose_plan
  - provide_email
  - provide_rating
  - request_billing
  - inform_id
  - request_support
  - issue_fixed

# 2. Entities: Data the bot needs to extract
entities:
  - plan
  - email
  - rating
  - user_id
  - billing_status

# 3. Slots: Memory for the conversation
slots:
  plan:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: plan
  user_id: 
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: user_id
  email:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: email
  rating:
    type: float
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: rating
  billing_status: # Estado de la factura (ej: 'VENCIDA', 'PAGADA', 'PENDIENTE')
    type: text
    influence_conversation: false
    mappings:
      - type: custom # Se llenará con la acción personalizada

forms:
  user_verification_form: # Nuevo formulario para recolectar el DUI
    required_slots:
      - user_id

actions:
  - validate_user_verification_form
  - action_check_billing_status
  - action_technical_support_rag

# 4. Bot Responses (Utterances)
responses:
  # Initial/Greeting
  utter_greet:
    - text: "¡Buenas! Bienvenido a nuestro servicio. ¿En qué te puedo ayudar?"
    - text: "¡Qué onda! ¿Listo para que te ayude con algo?"
  utter_ask_service:
    - text: "¡Chivo! Te puedo ayudar con cosas como **contratar un servicio nuevo**, **chequear los detalles de un plan**, o **darte soporte técnico**."
    - text: "¡De a galán! Te ayudo a **agarrar un plan nuevo**, **ver los detalles de los planes**, o con **soporte técnico**."

  # Service Path Responses
  utter_show_plans:
    - text: |
        Veo que querés contratar internet. Cabal, aquí están nuestros planes:
        **Plan 1 (Básico):** 100 Mbps por $40/mes
        **Plan 2 (Estándar):** 300 Mbps por $60/mes
        **Plan 3 (Premium):** 1 Gbps por $90/mes
        ¿Cuál plan te gusta más? (ej., Plan 2)
    - text: |
        Con gusto, aquí te muestro los planes que tenemos para que navegués:
        **Plan 1 (Básico):** 100 Mbps por $40 al mes
        **Plan 2 (Estándar):** 300 Mbps por $60 al mes
        **Plan 3 (Premium):** 1 Gbps por $90 al mes
        Decime, ¿cuál de estos te llega más?
  utter_ask_email:
    - text: "¡Excelente elección! Para mandarte los detalles del contrato, ¿me podrías dar tu **correo electrónico**, porfa?"
    - text: "¡Chivísimo! ¿Me regalás tu **correo** para enviarte el contrato?"
  utter_contract_sent:
    - text: "Gracias por tu correo, **{email}**. ¡Ya va en camino el contrato a tu bandeja de entrada! Te agradecemos por preferirnos."
    - text: "¡Cabal! Ya te mandé el contrato a **{email}**. ¡Gracias por elegirnos, estamos a la orden!"

  # Post-Service Flow
  utter_additional_request:
    - text: "¿Necesitás algo más o ya estamos?"
    - text: "¿Te puedo ayudar en alguna otra cosa?"
  utter_ask_rating:
    - text: "¡Gracias por usar nuestro servicio! Por último, ¿nos podrías regalar una calificación del **1 (malo) al 5 (excelente)** sobre tu experiencia de hoy?"
    - text: "¡Ya casi terminamos! Solo te pido que califiqués la atención con una nota del **1 al 5**. ¡Gracias!"

  # General/Ending
  utter_goodbye:
    - text: "¡Vaya pues, cuidate! ¡Feliz día!"
    - text: "¡Adiós! Que tengas un buen día."
  utter_thanks_answered:
    - text: "¡A la orden! Me alegra haberte ayudado."
    - text: "¡Ya sabés! Para eso estamos."
  utter_acknowledge_rating:
    - text: "¡Te agradecemos tu opinión! ¡Que tengas un día chivo!"
    - text: "¡Gracias por tu calificación! ¡Pasa un feliz día!"
  utter_contract_cancelled:
    - text: "Entiendo, no hay problema. Si más adelante te animás, aquí vamos a estar. ¡Gracias por considerarnos! ¡Cuidate!"
    - text: "Está bien, te entiendo. Cualquier cosa, ya sabés dónde encontrarnos. ¡Gracias y adiós!"

  # Billing Path Responses
  utter_ask_user_id: 
    - text: "Para consultar tu facturación, ¿me das tu **DUI**?" # Usado por el form
  utter_billing_overdue:
    - text: "Revisando... ¡Tenés una factura vencida! Por favor, revisá tu correo para los detalles de pago."
  utter_billing_paid:
    - text: "¡Revisando... Cheque! Tu facturación está al día. ¡Mil gracias por tu pago oportuno!"
  utter_billing_pending:
    - text: "Revisando... Tenés una factura pendiente de pago con fecha límite el 30 de este mes."
# 5. Session Configuration
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
