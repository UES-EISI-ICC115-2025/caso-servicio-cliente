version: "3.1"

stories:
  - story: Internet Service Contracting Happy Path
    steps:
      - action: utter_greet
      - intent: greet
      - action: utter_ask_service
      - intent: request_internet_service
      - action: action_fetch_product_plans
      - intent: choose_plan
      - slot_was_set:
          - plan: "..."
      - action: utter_ask_email
      - intent: provide_email
      - slot_was_set:
        - email: "some_email@example.com" 
      - action: utter_contract_sent
      - action: utter_additional_request
      - intent: deny
      - action: utter_ask_rating

  - story: User denies contract after seeing plans
    steps:
    - action: utter_greet
    - intent: greet
    - action: utter_ask_service
    - intent: request_internet_service
    - action: action_fetch_product_plans
    - intent: deny
    - action: utter_contract_cancelled
    - action: utter_ask_rating

  - story: Billing check and completion
    steps:
    - action: action_check_billing_status
    - action: utter_additional_request
    - intent: deny
    - action: utter_ask_rating

  - story: Technical Support RAG Flow
    steps:
    - intent: request_support
    # - user: Tengo problemas con mi internet, ¿qué hago?
    - action: action_technical_support_rag
    - intent: issue_fixed
    # Si no se establece un slot para continuar
    - action: utter_additional_request 
    - intent: deny
    - action: utter_ask_rating