version: "3.1"
rules:
  - rule: Saludar al usuario
    steps:
      - intent: saludo
      - action: utter_saludo
      - action: utter_ofrecer_ayuda

  - rule: activate login form por problema tecnico
    steps:
      - intent: problema_tecnico   # intent that triggers form activation
      - action: login_form      # run the form
      - active_loop: login_form # this form is active

  - rule: activate login form por problema de facturacion
    steps:
      - intent: problema_facturacion   # intent that triggers form activation
      - action: login_form      # run the form
      - active_loop: login_form # this form is active

  - rule: submit form
    condition:
    - active_loop: login_form   # this form must be active
    steps:
      - action: login_form      # run the form
      - active_loop: null            # the form is no longer active because it has been filled
      - action: utter_ask_nombre_completo
      - intent: give_nombre_completo
      # - action: utter_confirmar_datos   # action to take after the form is complete



  # - rule: Brindar Nombre completo
  #   steps:
  #     - intent: proporcionar_nombre_completo
  #       entities:
  #         - nombre: Juan Carlos Pérez Moran
  #     - action: action_validar_datos_cliente
  # - rule: Brindar Email
  #   steps:
  #     - intent: proporcionar_email
  #       entities:
  #         - email: estefany.gomez@example.com
  #     - action: action_validar_datos_cliente
  # - rule: Brindar Teléfono
  #   steps:
  #     - intent: proporcionar_telefono
  #       entities:
  #         - telefono: 9876-5432
  #     - action: action_validar_datos_cliente
  # - rule: Brindar DUI
  #   steps:
  #     - intent: proporcionar_dui
  #       entities:
  #         - dui: '987654321'
  #     - action: action_validar_datos_cliente

  # - rule: Despedirse del usuario
  #   steps:
  #     - intent: despedida
  #     - action: utter_despedida

  # - rule: responder según plan no disponible
  #   steps:
  #     - intent: elegir_plan
  #     - action: action_validar_plan
  #     - slot_was_set:
  #         - plan_valido: false
  #     - action: utter_plan_no_disponible

  - rule: Fallback
    steps:
      - intent: nlu_fallback
      - action: utter_default