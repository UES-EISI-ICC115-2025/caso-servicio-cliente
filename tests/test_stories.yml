# tests/test_stories.yml
version: "3.1"

stories:
- story: Test Case - Happy Path Internet Contract
  steps:
  # 1. Bot Greets
  - action: utter_greet
  
  # 2. User Greets & Bot explains capabilities
  - user: qu√© onda
    intent: greet
  - action: utter_ask_service
  
  # 3. User states goal & Bot shows plans
  - user: quiero agarrar un plan de internet
    intent: request_internet_service
  - action: utter_show_plans
  
  # 4. User chooses a plan & Bot asks for email
  - user: Yo quiero el plan basico
    intent: choose_plan
    entities:
      - plan: "Plan 1"
  - slot_was_set:
      - plan: "Plan 1"
  - action: utter_ask_email
  
  # 5. User provides email (Rule will handle the next actions)
  - user: mi correo es test.user@mail.com
    intent: provide_email
    entities:
      - email: "test.user@mail.com"
  - slot_was_set:
      - email: "test.user@mail.com"
  
  # 6. Bot confirms contract and asks for additional request (Actions from the Rule)
  - action: utter_contract_sent
  - action: utter_additional_request

  # 7. User says no more requests & Bot asks for rating
  - user: solamente
    intent: deny
  
  # 8. User provides rating & Bot acknowledges and says goodbye
  - action: utter_ask_rating
  - user: le doy un 5
    intent: provide_rating
    entities:
      - rating: "5"
  - action: utter_acknowledge_rating

- story: Test Case - Contract Denial Path
  steps:
  - action: utter_greet
  - user: buenas
    intent: greet
  - action: utter_ask_service
  - user: quiero internet
    intent: request_internet_service
  - action: utter_show_plans
  - user: no, no me gusto ninguno
    intent: deny
  - action: utter_contract_cancelled
  - action: utter_ask_rating         # Bot asks for rating
# User provides rating
  - user: "4"
    intent: provide_rating
    entities:
      - rating: "4"
      
  - action: utter_acknowledge_rating # Bot acknowledges